##################################
######		TEMPLATE		######
##################################
## <operation id> is a placeholder for the ID assigned (added in the array and used in scripted loc to grab the name)
## <decision name> is a placeholder for the code name of the specific decision
##################################################################################################################################################
#### Operation Specific ###
###########################
##	set_up_decisions_for_war_room_operation_<operation id> = {
##		# setting up the array with decisions
##		clear_array = global.war_room_operation_<operation id>_decisions_array
##		add_to_array = { global.war_room_operation_<operation id>_decisions_array = token:<decision name> }
##	}
##
##	complete_war_room_operation_<operation id> = {
##		# the effects that should be executed when the operation is successfully completed after launch
##	}
##
##	fail_war_room_operation_<operation id> = {
##		# the effects that should be executed when the operation is failed after launch
##	}
##	execute_progress_phase_1_effect_for_war_room_operation_<operation id> = {
##		# the effects that should be executed when the operation is launched after having reached phase 1 of the preparations
##		# not executed if reaching higher phases
##		# only executed if the operation uses at least 1 phases
##	}
##
##	execute_progress_phase_2_effect_for_war_room_operation_<operation id> = {
##		# the effects that should be executed when the operation is launched after having reached phase 2 of the preparations
##		# not executed if reaching higher phases
##		# only executed if the operation uses at least 2 phases
##	}
##
##	execute_progress_phase_3_effect_for_war_room_operation_<operation id> = {
##		# the effects that should be executed when the operation is launched after having reached phase 3 of the preparations
##		# not executed if reaching higher phases
##		# only executed if the operation uses at least 3 phases
##	}
##
##	execute_progress_phase_4_effect_for_war_room_operation_<operation id> = {
##		# the effects that should be executed when the operation is launched after having reached phase 4 of the preparations
##		# only executed if the operation uses at least 4 phases
##	}
##
##	execute_progress_phase_5_effect_for_war_room_operation_<operation id> = {
##		# the effects that should be executed when the operation is launched after having reached phase 5 of the preparations
##		# only executed if the operation uses at least 5 phases
##	}
##
########################
### Decision Specific ##
########################
##	war_room_operation_decision_complete_effect_<decision name> = {
##		show_complete_effect_war_room_operation_decision_general_tooltip = yes # use this, if there are any visible effects
##		# the effects that should be executed when the decision is enacted
##	}
##	war_room_operation_decision_remove_effect_<decision name> = {
##		set_temp_variable = { days_remove = <amount of days used for the decision's days_remove> }
##		show_remove_effect_war_room_operation_decision_general_tooltip = yes # use this, if there are any visible effects
##		# the effects that should be executed when the decision is enacted
##	}
##	war_room_operation_decision_cancel_effect_<decision name> = {
##		show_cancel_effect_war_room_operation_decision_general_tooltip = yes # use this, if there are any visible effects
##		# the effects that should be executed when the decision is enacted
##	}
##################################################################################################################################################


#############
### GROZA ###
#############

set_up_decisions_for_war_room_operation_1 = {
	clear_array = global.war_room_operation_1_decisions_array
	add_to_array = { global.war_room_operation_1_decisions_array = token:operation_groza_decision_launch_operation }
	add_to_array = { global.war_room_operation_1_decisions_array = token:operation_groza_decision_evaluate_the_stavka }
	add_to_array = { global.war_room_operation_1_decisions_array = token:operation_groza_decision_form_the_state_defense_committee }
	add_to_array = { global.war_room_operation_1_decisions_array = token:operation_groza_decision_form_the_headquarters_of_the_supreme_high_command }
	add_to_array = { global.war_room_operation_1_decisions_array = token:operation_groza_decision_evaluate_the_red_airforce }
	add_to_array = { global.war_room_operation_1_decisions_array = token:operation_groza_decision_evaluate_the_red_navy }
	add_to_array = { global.war_room_operation_1_decisions_array = token:operation_groza_decision_assure_production_in_the_military_industry }
	add_to_array = { global.war_room_operation_1_decisions_array = token:operation_groza_decision_draft_mobilization_order_41 }
	add_to_array = { global.war_room_operation_1_decisions_array = token:operation_groza_decision_prepare_key_infrastructure_in_ukraine }
	add_to_array = { global.war_room_operation_1_decisions_array = token:operation_groza_decision_prepare_key_infrastructure_in_the_baltics }
	add_to_array = { global.war_room_operation_1_decisions_array = token:operation_groza_decision_assure_air_superiority }
	add_to_array = { global.war_room_operation_1_decisions_array = token:operation_groza_decision_construct_new_bases_in_the_baltics }
	add_to_array = { global.war_room_operation_1_decisions_array = token:operation_groza_decision_assure_control_of_baltic_seaports }
	add_to_array = { global.war_room_operation_1_decisions_array = token:operation_groza_decision_fortify_sevastopol_and_odessa }
}

complete_war_room_operation_1 = {
	hidden_effect = {
		remove_ideas = {
			SOV_Operation_Groza_1
			SOV_Operation_Groza_2
			SOV_Operation_Groza_3
			SOV_Operation_Groza_Military_Industry
			SOV_Operation_Groza_Draft_Mobilization
			SOV_Operation_Groza_Air_Superiority
			SOV_Operation_Groza_Baltic_Seaports
		}
	}
	add_political_power = 100
	add_war_support = 0.1
	add_stability = 0.05
	add_popularity = {
		ideology = var:current_party_ideology_group
		popularity = 0.1
	}
	add_ideas = SOV_Operation_Groza_Completed
}

fail_war_room_operation_1 = {
	hidden_effect = {
		remove_ideas = {
			SOV_Operation_Groza_1
			SOV_Operation_Groza_2
			SOV_Operation_Groza_3
			SOV_Operation_Groza_Military_Industry
			SOV_Operation_Groza_Draft_Mobilization
			SOV_Operation_Groza_Air_Superiority
			SOV_Operation_Groza_Baltic_Seaports
			SOV_Operation_Groza_Completed
		}
	}
	add_political_power = -100
	add_stability = -0.1
	add_war_support = -0.1
	add_popularity = {
		ideology = var:current_party_ideology_group
		popularity = -0.1
	}
}

execute_progress_phase_1_effect_for_war_room_operation_1 = {
	custom_effect_tooltip = DH_WAR_ROOM_OPERATION_NO_EFFECT_TT
}

execute_progress_phase_2_effect_for_war_room_operation_1 = {
	add_timed_idea {
		idea = SOV_Operation_Groza_1
		days = 120
	}
}

execute_progress_phase_3_effect_for_war_room_operation_1 = {
	add_timed_idea {
		idea = SOV_Operation_Groza_2
		days = 120
	}
}

execute_progress_phase_4_effect_for_war_room_operation_1 = {
	add_timed_idea {
		idea = SOV_Operation_Groza_3
		days = 120
	}
}

execute_progress_phase_5_effect_for_war_room_operation_1 = {
}

## Decisions ##
war_room_operation_decision_complete_effect_operation_groza_decision_launch_operation = {
	show_complete_effect_war_room_operation_decision_general_tooltip = yes
	launch_war_room_operation = yes
	declare_war_on = {
		target = GER
		type = annex_everything
	}
	news_event = { id = SOV_Liberation_of_Europe.0 days = 1 }
	country_event = { id = SOV_Liberation_of_Europe.100 }
}
war_room_operation_decision_remove_effect_operation_groza_decision_launch_operation = {
	set_temp_variable = { days_remove = -1 }
	show_remove_effect_war_room_operation_decision_general_tooltip = yes
	complete_war_room_operation = yes
}
war_room_operation_decision_cancel_effect_operation_groza_decision_launch_operation = {
	show_cancel_effect_war_room_operation_decision_general_tooltip = yes
	fail_war_room_operation = yes
}

war_room_operation_decision_complete_effect_operation_groza_decision_evaluate_the_stavka = {
	show_complete_effect_war_room_operation_decision_general_tooltip = yes
	add_political_power = -50
}
war_room_operation_decision_remove_effect_operation_groza_decision_evaluate_the_stavka = {
	set_temp_variable = { days_remove = 30 }
	show_remove_effect_war_room_operation_decision_general_tooltip = yes
	set_temp_variable = { amount = 10 }
	add_war_room_operation_progress = yes
	unlock_decision_tooltip = operation_groza_decision_form_the_state_defense_committee
	unlock_decision_tooltip = operation_groza_decision_form_the_headquarters_of_the_supreme_high_command
	unlock_decision_tooltip = operation_groza_decision_evaluate_the_red_airforce
	unlock_decision_tooltip = operation_groza_decision_evaluate_the_red_navy
	unlock_decision_tooltip = operation_groza_decision_assure_production_in_the_military_industry
}
war_room_operation_decision_cancel_effect_operation_groza_decision_evaluate_the_stavka = {
#	show_cancel_effect_war_room_operation_decision_general_tooltip = yes
}

war_room_operation_decision_complete_effect_operation_groza_decision_form_the_state_defense_committee = {
	show_complete_effect_war_room_operation_decision_general_tooltip = yes
	add_political_power = -15
}
war_room_operation_decision_remove_effect_operation_groza_decision_form_the_state_defense_committee = {
	set_temp_variable = { days_remove = 30 }
	show_remove_effect_war_room_operation_decision_general_tooltip = yes
	set_temp_variable = { amount = 5 }
	add_war_room_operation_progress = yes
	add_war_support = 0.025
}
war_room_operation_decision_cancel_effect_operation_groza_decision_form_the_state_defense_committee = {
#	show_cancel_effect_war_room_operation_decision_general_tooltip = yes
}

war_room_operation_decision_complete_effect_operation_groza_decision_form_the_headquarters_of_the_supreme_high_command = {
	show_complete_effect_war_room_operation_decision_general_tooltip = yes
	add_political_power = -15
}
war_room_operation_decision_remove_effect_operation_groza_decision_form_the_headquarters_of_the_supreme_high_command = {
	set_temp_variable = { days_remove = 30 }
	show_remove_effect_war_room_operation_decision_general_tooltip = yes
	set_temp_variable = { amount = 5 }
	add_war_room_operation_progress = yes
	army_experience = 10
	unlock_decision_tooltip = operation_groza_decision_draft_mobilization_order_41
	unlock_decision_tooltip = operation_groza_decision_prepare_key_infrastructure_in_ukraine
	unlock_decision_tooltip = operation_groza_decision_prepare_key_infrastructure_in_the_baltics
}
war_room_operation_decision_cancel_effect_operation_groza_decision_form_the_headquarters_of_the_supreme_high_command = {
#	show_cancel_effect_war_room_operation_decision_general_tooltip = yes
}

war_room_operation_decision_complete_effect_operation_groza_decision_evaluate_the_red_airforce = {
#	show_complete_effect_war_room_operation_decision_general_tooltip = yes
}
war_room_operation_decision_remove_effect_operation_groza_decision_evaluate_the_red_airforce = {
	set_temp_variable = { days_remove = 15 }
	show_remove_effect_war_room_operation_decision_general_tooltip = yes
	set_temp_variable = { amount = 5 }
	add_war_room_operation_progress = yes
	air_experience = 10
	unlock_decision_tooltip = operation_groza_decision_assure_air_superiority
	unlock_decision_tooltip = operation_groza_decision_construct_new_bases_in_the_baltics
}
war_room_operation_decision_cancel_effect_operation_groza_decision_evaluate_the_red_airforce = {
#	show_cancel_effect_war_room_operation_decision_general_tooltip = yes
}

war_room_operation_decision_complete_effect_operation_groza_decision_evaluate_the_red_navy = {
#	show_complete_effect_war_room_operation_decision_general_tooltip = yes
}
war_room_operation_decision_remove_effect_operation_groza_decision_evaluate_the_red_navy = {
	set_temp_variable = { days_remove = 15 }
	show_remove_effect_war_room_operation_decision_general_tooltip = yes
	set_temp_variable = { amount = 5 }
	add_war_room_operation_progress = yes
	navy_experience = 10
	unlock_decision_tooltip = operation_groza_decision_assure_control_of_baltic_seaports
	unlock_decision_tooltip = operation_groza_decision_fortify_sevastopol_and_odessa
}
war_room_operation_decision_cancel_effect_operation_groza_decision_evaluate_the_red_navy = {
#	show_cancel_effect_war_room_operation_decision_general_tooltip = yes
}

war_room_operation_decision_complete_effect_operation_groza_decision_assure_production_in_the_military_industry = {
	show_complete_effect_war_room_operation_decision_general_tooltip = yes
	add_political_power = -30
}
war_room_operation_decision_remove_effect_operation_groza_decision_assure_production_in_the_military_industry = {
	set_temp_variable = { days_remove = 60 }
	show_remove_effect_war_room_operation_decision_general_tooltip = yes
	set_temp_variable = { amount = 5 }
	add_war_room_operation_progress = yes
	add_timed_idea = {
		idea = SOV_Operation_Groza_Military_Industry
		days = 150
	}
}
war_room_operation_decision_cancel_effect_operation_groza_decision_assure_production_in_the_military_industry = {
#	show_cancel_effect_war_room_operation_decision_general_tooltip = yes
}

war_room_operation_decision_complete_effect_operation_groza_decision_draft_mobilization_order_41 = {
	show_complete_effect_war_room_operation_decision_general_tooltip = yes
	add_political_power = -200
}
war_room_operation_decision_remove_effect_operation_groza_decision_draft_mobilization_order_41 = {
	set_temp_variable = { days_remove = 45 }
	show_remove_effect_war_room_operation_decision_general_tooltip = yes
	set_temp_variable = { amount = 15 }
	add_war_room_operation_progress = yes
	add_timed_idea = {
		idea = SOV_Operation_Groza_Draft_Mobilization
		days = 150
	}
}
war_room_operation_decision_cancel_effect_operation_groza_decision_draft_mobilization_order_41 = {
#	show_cancel_effect_war_room_operation_decision_general_tooltip = yes
}

war_room_operation_decision_complete_effect_operation_groza_decision_prepare_key_infrastructure_in_ukraine = {
	show_complete_effect_war_room_operation_decision_general_tooltip = yes
	add_political_power = -100
}
war_room_operation_decision_remove_effect_operation_groza_decision_prepare_key_infrastructure_in_ukraine = {
	set_temp_variable = { days_remove = 80 }
	show_remove_effect_war_room_operation_decision_general_tooltip = yes
	set_temp_variable = { amount = 5 }
	add_war_room_operation_progress = yes
	202 = {
		add_building_construction = {
			type = infrastructure
			level = 3
			instant_build = yes
		}
	}
	if = {
		limit = {
			controls_state = 89
		}
		89 = {
			add_building_construction = {
				type = infrastructure
				level = 3
				instant_build = yes
			}
		}
	}
	if = {
		limit = {
			controls_state = 91
		}
		91 = {
			add_building_construction = {
				type = infrastructure
				level = 3
				instant_build = yes
			}
		}
	}
	if = {
		limit = {
			controls_state = 93
		}
		93 = {
			add_building_construction = {
				type = infrastructure
				level = 3
				instant_build = yes
			}
		}
	}
	if = {
		limit = {
			check_variable = { show_tooltip = 1 }
		}
		custom_effect_tooltip = war_room_operation_decision_remove_effect_operation_groza_decision_prepare_key_infrastructure_in_ukraine_tt
	}
}
war_room_operation_decision_cancel_effect_operation_groza_decision_prepare_key_infrastructure_in_ukraine = {
#	show_cancel_effect_war_room_operation_decision_general_tooltip = yes
}

war_room_operation_decision_complete_effect_operation_groza_decision_prepare_key_infrastructure_in_the_baltics = {
	show_complete_effect_war_room_operation_decision_general_tooltip = yes
	add_political_power = -100
}
war_room_operation_decision_remove_effect_operation_groza_decision_prepare_key_infrastructure_in_the_baltics = {
	set_temp_variable = { days_remove = 80 }
	show_remove_effect_war_room_operation_decision_general_tooltip = yes
	set_temp_variable = { amount = 5 }
	add_war_room_operation_progress = yes
	if = {
		limit = {
			controls_state = 189
		}
		189 = {
			add_building_construction = {
				type = infrastructure
				level = 3
				instant_build = yes
			}
		}
	}
	if = {
		limit = {
			controls_state = 12
		}
		12 = {
			add_building_construction = {
				type = infrastructure
				level = 3
				instant_build = yes
			}
		}
	}
	if = {
		limit = {
			controls_state = 805
		}
		805 = {
			add_building_construction = {
				type = infrastructure
				level = 3
				instant_build = yes
			}
		}
	}
	if = {
		limit = {
			controls_state = 11
		}
		11 = {
			add_building_construction = {
				type = infrastructure
				level = 3
				instant_build = yes
			}
		}
	}
	if = {
		limit = {
			check_variable = { show_tooltip = 1 }
		}
		custom_effect_tooltip = war_room_operation_decision_remove_effect_operation_groza_decision_prepare_key_infrastructure_in_the_baltics_tt
	}
}
war_room_operation_decision_cancel_effect_operation_groza_decision_prepare_key_infrastructure_in_the_baltics = {
#	show_cancel_effect_war_room_operation_decision_general_tooltip = yes
}

war_room_operation_decision_complete_effect_operation_groza_decision_assure_air_superiority = {
#	show_complete_effect_war_room_operation_decision_general_tooltip = yes
}
war_room_operation_decision_remove_effect_operation_groza_decision_assure_air_superiority = {
	set_temp_variable = { days_remove = 30 }
	show_remove_effect_war_room_operation_decision_general_tooltip = yes
	set_temp_variable = { amount = 15 }
	add_war_room_operation_progress = yes
	add_timed_idea = {
		idea = SOV_Operation_Groza_Air_Superiority
		days = 150
	}
}
war_room_operation_decision_cancel_effect_operation_groza_decision_assure_air_superiority = {
#	show_cancel_effect_war_room_operation_decision_general_tooltip = yes
}

war_room_operation_decision_complete_effect_operation_groza_decision_construct_new_bases_in_the_baltics = {
	show_complete_effect_war_room_operation_decision_general_tooltip = yes
	add_political_power = -50
}
war_room_operation_decision_remove_effect_operation_groza_decision_construct_new_bases_in_the_baltics = {
	set_temp_variable = { days_remove = 45 }
	show_remove_effect_war_room_operation_decision_general_tooltip = yes
	set_temp_variable = { amount = 5 }
	add_war_room_operation_progress = yes
	if = {
		limit = {
			controls_state = 12
		}
		12 = {
			add_building_construction = {
				type = air_base
				level = 6
				instant_build = yes
			}
		}
	}
	if = {
		limit = {
			controls_state = 805
		}
		805 = {
			add_building_construction = {
				type = air_base
				level = 6
				instant_build = yes
			}
		}
	}
	if = {
		limit = {
			check_variable = { show_tooltip = 1 }
		}
		custom_effect_tooltip = war_room_operation_decision_remove_effect_operation_groza_decision_construct_new_bases_in_the_baltics_tt
	}
}
war_room_operation_decision_cancel_effect_operation_groza_decision_construct_new_bases_in_the_baltics = {
#	show_cancel_effect_war_room_operation_decision_general_tooltip = yes
}

war_room_operation_decision_complete_effect_operation_groza_decision_assure_control_of_baltic_seaports = {
#	show_complete_effect_war_room_operation_decision_general_tooltip = yes
}
war_room_operation_decision_remove_effect_operation_groza_decision_assure_control_of_baltic_seaports = {
	set_temp_variable = { days_remove = 30 }
	show_remove_effect_war_room_operation_decision_general_tooltip = yes
	set_temp_variable = { amount = 15 }
	add_war_room_operation_progress = yes
	add_timed_idea = {
		idea = SOV_Operation_Groza_Baltic_Seaports
		days = 150
	}
}
war_room_operation_decision_cancel_effect_operation_groza_decision_assure_control_of_baltic_seaports = {
#	show_cancel_effect_war_room_operation_decision_general_tooltip = yes
}

war_room_operation_decision_complete_effect_operation_groza_decision_fortify_sevastopol_and_odessa = {
	show_complete_effect_war_room_operation_decision_general_tooltip = yes
	add_political_power = -50
}
war_room_operation_decision_remove_effect_operation_groza_decision_fortify_sevastopol_and_odessa = {
	set_temp_variable = { days_remove = 45 }
	show_remove_effect_war_room_operation_decision_general_tooltip = yes
	set_temp_variable = { amount = 5 }
	add_war_room_operation_progress = yes
	137 = {
		add_building_construction = {
			type = bunker
			level = 3
			instant_build = yes
			province = 3686
		}
		add_building_construction = {
			type = coastal_bunker
			level = 3
			instant_build = yes
			province = 3686
		}
	}
	192 = {
		add_building_construction = {
			type = bunker
			level = 3
			instant_build = yes
			province = 11670
		}
		add_building_construction = {
			type = coastal_bunker
			level = 3
			instant_build = yes
			province = 11670
		}
	}
	if = {
		limit = {
			check_variable = { show_tooltip = 1 }
		}
		custom_effect_tooltip = war_room_operation_decision_remove_effect_operation_groza_decision_fortify_sevastopol_and_odessa_tt
	}
}
war_room_operation_decision_cancel_effect_operation_groza_decision_fortify_sevastopol_and_odessa = {
#	show_cancel_effect_war_room_operation_decision_general_tooltip = yes
}